!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b(a)}):a.CloudPoodll=b(a)}(this,function(a){return{version:"1.0.0",baseURL:"https://cloud.poodll.com/filter/poodll/ext/poodllrecorder.php",params:["parent","timelimit","type","media","updatecontrol","width","height","id"],fetchContainers:function(a){var b=document.getElementsByClassName(a);return b},autoCreateRecorders:function(a){a||(a="poodllrecorder");for(var b=this.fetchContainers(a),c=0;c<b.length;c++)this.insertRecorder(b[c])},createRecorder:function(a){var b=document.getElementById(a);this.insertRecorder(b)},insertRecorder:function(a){var b=this.parseAttributes(a),c=this.createIframe(b);a.appendChild(c)},parseAttributes:function(a){for(var b={},c=0;c<this.params.length;c++){var d=a.getAttribute("data-"+this.params[c]);null!==d&&(b[this.params[c]]=d)}return b},createIframe:function(a){var b=document.createElement("iframe"),c=this.baseURL+"?";for(var d in a)c=c+d+"="+a[d]+"&";return b.setAttribute("src",c),b.setAttribute("width",a.width),b.setAttribute("height",a.height),b.setAttribute("frameBorder",0),b.setAttribute("allow","camera,microphone"),b},theCallback:function(a){if("filesubmitted"==a.type){var b=a.updatecontrol,c=document.getElementById(b),d=a.cloudroot+a.cloudfilename;c&&(c.value=d)}},initEvents:function(){var a=this;window.onmessage=function(b){var c=b.data;c&&c.hasOwnProperty("id")&&c.hasOwnProperty("type")&&a.theCallback(c)}},fetchroot:function(){return a}}});